## 图片压缩 ##
- 首先图片压缩是耗时操作，是在子线程完成的。
- ①根据标志位判断是否需要压缩（默认是压缩的），如果需要压缩则读取当前文件的路径（通过字节流的读取形式），再压缩。
- ②在压缩方法中：首先判断需要压缩的文件是否存在，如果不存在则返回原路径。
- ③如果文件路径存在，则再根据当前文件的大小是否小于压缩后需要的最大尺寸（常量300 * 1024），如果不小于，则不需要进行压缩。大于则需要进行压缩。
- ④在图片需要压缩的情况下，获取原始图片（未压缩）的大小，主要是通过将options.inJustDecodeBounds = true,将这个开关打开，目的是不让该图片真正的加载到内存，仅获得其outWidth,outHeight,从而返回未压缩图片的size。
- ⑤再根据图片的分辨率判断是否进行压缩，主要是通过原始图片outwidth,outHeight的最小值是否大于1080，如果大于，则需要进行压缩。
- ⑥根据上面的几个条件，都满足需要压缩的条件时，则进行图片压缩。首先采取的压缩方式compressByLibjpeg的方式，在这个方式中主要是通过libjpeg进行压缩，首先计算缩放尺寸，并判断缩放尺寸是否适合libjpeg使用的尺寸。并通过压缩质量在大于30，文件大小不大于最终需要的文件大小来进行不断的循环压缩。如果已经压缩成功，则返回true,则不需要进行下面的执行步骤，直接将压缩之后的文件上传，更新文件路径。
- ⑥如果未压缩成功，则再进行compressByBitmap的形式进行压缩，首先采取采样率为2,在原始的图片的宽高均大于需要的文件的宽高的情况下，不断增加采样率的值（2，3，4，5）进行压缩，为避免一部分手机在缩放比例取3的时候，会自动向下取整的现象，则先将采样率设置为1，再以2的指数形式进行压缩。最终返回一个采样率。
- ⑦在获取到最终采样率的情况下，根据android版本，在不同虚拟机上进行config即图片属性的一些配置。最终返回图片属性。
- ⑧再以文件大小和质量的形式来不断循环的进行压缩。
