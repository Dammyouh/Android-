### 一、Java中有四种引用类型

- 强引用：在平时编程中，用的最多。如果一个对象具有强引用，那么Java虚拟机宁愿跑出out of memory 也不会对这个对象进行回收。

  ```java
  User user = new User()
  ```

  

- 软引用：如果一个对象具有软引用，那么Java虚拟机内存空间足够的画，垃圾回收器就不会回收它。但是当内存空间不足的时候，就会回收这些对象的内存。只要垃圾回收器没有回收它，该对象就可以被程序使用，软引用可用来实现敏感的高速缓存。

  ```java
  SoftReference<User> sr = new SoftReference<User>(new User（）)；
  ```

  

- 弱引用：如果一个对象只具有弱引用，则不管Java虚拟机内存是否足够，在垃圾回收器扫描它所管辖的范围内，一旦gc发现对象为weakReference可达，就可以把它放到ReferenceQueue,等待下次gc回收它。所以在使用弱引用的时候，注意通过.get()时进行判空处理。

  ```java
  `WeakReference<User> wr = new WeakReference<User>(new User());`
  ```

  

- **虚引用：**“虚引用”顾名思义，就是形同虚设，与其他几种引用都不同，虚引用并不会决定对象的生命周期。如果一个对象 仅持有虚引用，那么它就和没有任何引用一样，在任何时候都可能被垃圾回收。 虚引用主要用来跟踪对象被垃圾回收的活动。虚引用与软引用和弱引用的一个区别在于：虚引用必须和引用队列 （ReferenceQueue）联合使用。当垃圾回收器准备回收一个对象时，如果发现它还有虚引用，就会在回收对象的内存之前，把这个虚引用加入到与之 关联的引用队列中。程序可以通过判断引用队列中是否已经加入了虚引用，来了解被引用的对象是否将要被垃圾回收。程序如果发现某个虚引用已经被加入到引用队 列，那么就可以在所引用的对象的内存被回收之前采取必要的行动。 